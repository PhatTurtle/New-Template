<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" th:replace="~{/components/layout :: areas(~{::title},~{::body})}">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Marious | Chi Tiết Sản Phẩm</title>

  <!-- Library -->
  <link href="https://cdn.jsdelivr.net/npm/daisyui@4.4.2/dist/full.min.css" rel="stylesheet" type="text/css" />
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- icon -->
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
  <!-- icon -->
  <!-- Library -->
  <script src="https://cdn.ckeditor.com/ckeditor5/39.0.2/classic/ckeditor.js"></script>
</head>

<body class="bg-white min-h-screen min-w-full">


  <!-- Product Detail -->
  <section class="w-[90%] md:w-[80%] mx-auto text-black font-light text-xs my-10 border-b pb-5">
    <div class="w-full grid grid-cols-1 lg:grid-cols-2 gap-x-5 gap-y-5">
      <div class="flex flex-col lg:flex-row  gap-x-2 gap-y-2">
   
         <!-- <div class="h-96   hidden lg:flex lg:flex-col lg:w-[20%] gap-y-2 carousel carousel-vertical rounded-lg">
          <a href="#item1" class="carousel-item w-full">
            <img
              src="https://noithatkdt.vn/wp-content/uploads/2023/11/Ghe-go-nho-gon-cho-phong-khach-S326-8-600x600.jpg" />
          </a>
          <a href="#item2" class="carousel-item w-full">
            <img
              src="https://noithatkdt.vn/wp-content/uploads/2023/11/Ghe-go-nho-gon-cho-phong-khach-S326-8-600x600.jpg" />
          </a>
          <a href="#item3" class="carousel-item w-full">
            <img
              src="https://noithatkdt.vn/wp-content/uploads/2023/11/Ghe-go-nho-gon-cho-phong-khach-S326-8-600x600.jpg" />
          </a>
          <a href="#item4" class="carousel-item w-full">
            <img
              src="https://noithatkdt.vn/wp-content/uploads/2023/11/Ghe-go-nho-gon-cho-phong-khach-S326-8-600x600.jpg" />
          </a>
          <a href="#item5" class="carousel-item w-full">
            <img
              src="https://noithatkdt.vn/wp-content/uploads/2023/11/Ghe-go-nho-gon-cho-phong-khach-S326-8-600x600.jpg" />
          </a>

        </div> -->
        
        <div class="carousel rounded-lg w-full lg:w-[80%] lg:h-[30rem]">
          <div id="item1" class="carousel-item w-full">
            <img class="w-full mx-auto"
              th:src="'/assets/images/products/' + ${products.image}"
              alt="" />
          </div>
          <!-- <div id="item2" class="carousel-item w-full">
            <img class="w-full mx-auto"
              src="https://noithatkdt.vn/wp-content/uploads/2023/11/Ghe-go-nho-gon-cho-phong-khach-S326-8-600x600.jpg"
              alt="Burger" />
          </div>
          <div id="item3" class="carousel-item w-full">
            <img class="w-full mx-auto"
              src="https://noithatkdt.vn/wp-content/uploads/2023/11/Ghe-go-nho-gon-cho-phong-khach-S326-8-600x600.jpg"
              alt="Burger" />
          </div>
          <div id="item4" class="carousel-item w-full">
            <img class="w-full mx-auto"
              src="https://noithatkdt.vn/wp-content/uploads/2023/11/Ghe-go-nho-gon-cho-phong-khach-S326-8-600x600.jpg"
              alt="Burger" />
          </div>
          <div id="item5" class="carousel-item w-full">
            <img class="w-full mx-auto"
              src="https://noithatkdt.vn/wp-content/uploads/2023/11/Ghe-go-nho-gon-cho-phong-khach-S326-8-600x600.jpg"
              alt="Burger" />
          </div> -->

        </div>
        <!--  -->
        <div class=" w-full gap-x-2  lg:w-[20%]  lg:hidden gap-y-2 carousel carousel rounded-lg">
          <a href="#item1" class="carousel-item w-1/2 lg:w-full">
            <img
              src="https://noithatkdt.vn/wp-content/uploads/2023/11/Ghe-go-nho-gon-cho-phong-khach-S326-8-600x600.jpg" />
          </a>
          <a href="#item2" class="carousel-item w-1/2 lg:w-full">
            <img
              src="https://noithatkdt.vn/wp-content/uploads/2023/11/Ghe-go-nho-gon-cho-phong-khach-S326-8-600x600.jpg" />
          </a>
          <a href="#item3" class="carousel-item w-1/2 lg:w-full">
            <img
              src="https://noithatkdt.vn/wp-content/uploads/2023/11/Ghe-go-nho-gon-cho-phong-khach-S326-8-600x600.jpg" />
          </a>
          <a href="#item4" class="carousel-item w-1/2 lg:w-full">
            <img
              src="https://noithatkdt.vn/wp-content/uploads/2023/11/Ghe-go-nho-gon-cho-phong-khach-S326-8-600x600.jpg" />
          </a>
          <a href="#item5" class="carousel-item w-1/2 lg:w-full">
            <img
              src="https://noithatkdt.vn/wp-content/uploads/2023/11/Ghe-go-nho-gon-cho-phong-khach-S326-8-600x600.jpg" />
          </a>

        </div>
      </div>
      <form method="post" th:action="@{/cart/addProductDetail}" class="flex flex-col gap-y-5">
        <!-- Title Product -->
        <div class=" text-lg md:text-xl lg:text-4xl font-semibold">
          <p th:text="${products.name}"></p>
        </div>
        <!-- Price -->
        <div class="flex items-center gap-x-5">

          <p class='text-xl text-orange-300 font-semibold'
            th:text="${#numbers.formatDecimal(products.price, 0, 'COMMA', 0, 'POINT')} + ' VND'"></p>
        </div>
        <p th:text="'Hàng còn: ' + ${products.quantityInStock}"></p>
        <!-- <p th:text="'Đã bán: ' + ${unitsSoldMap[__${product.productId}__]}"></p> -->
        <!-- Size -->
        <!-- <div class="flex gap-x-5 text-black">
                            <button class="py-2 px-3 border rounded-lg hover:border-orange-300 duration-300 hover:duration-300">X</button>
                            <button class="py-2 px-3 border rounded-lg hover:border-orange-300 duration-300 hover:duration-300">M</button>
                            <button class="py-2 px-3 border rounded-lg hover:border-orange-300 duration-300 hover:duration-300">L</button>
                            <button class="py-2 px-3 border rounded-lg hover:border-orange-300 duration-300 hover:duration-300">XL</button>
                        </div> -->
        <!-- Count -->
        <div class="flex flex-col md:flex-row justify-between items-center w-full md:gap-x-1 ">
          <div class="w-[40%]">
            <div class="flex  rounded-lg text-black border">
             
              <input class="w-full py-2 text-xl bg-transparent  border-0 outline-none text-center" name="quantity" value="1" min="1"  type='number' />
              
            </div>
          </div>

          <div    class="w-[100%] lg:w-[70%] mt-5 md:mt-0  mx-auto">
            <input type="hidden" name="productId" th:value="${products.productId}">
            <button type="submit" class=' btn w-full btn-warning'>Thêm Vào Giỏ Hàng</button>
          </div>
        </div>
        <div class="flex flex-col gap-y-5">
          <div tabindex="0" class="collapse collapse-open border rounded-lg ">
            <div class="collapse-title text-xl font-medium">
              Thông Tin Sản Phẩm
            </div>
            <div class="collapse-content ">
              <div class="">
                <ul class="flex flex-col gap-y-2 text-xl">
                  [(${products.description})]
                  
                  <!-- <p>- Chất Liệu : Da Bò Thật</p>a
                                      <p>- Kích Thước: 100x100x100</p>
                                      <p>- Màu Sắc: Màu Be</p>
                                      <p>- Sản Xuát: Việt Nam</p>
                                      <p>- Thương Hiệu: Marious</p>
                                      <p>- Mô Tả: Ngồi êm lắm bà con</p> -->
                </ul>
              </div>
            </div>
          </div>

          <!-- <div tabindex="0" class="collapse collapse-plus border rounded-lg ">
                                <div class="collapse-title text-xl font-medium">
                                  Dịch Vụ Giao Hàng
                                </div>
                                <div class="collapse-content"> 
                                  <p>tabindex="0" attribute is necessary to make the div focusable</p>
                                </div>
                              </div> -->
        </div>
      </form>
    </div>
  </section>
  <!-- Product Detail -->
  <!-- Comment -->
  <section class="w-[90%] md:w-[80%] mx-auto h-auto text-black font-light text-xs my-20  ">
    <div class="text-2xl font-semibold pb-5 flex items-center gap-x-2 text-orange-300">
      <ion-icon name="pricetags-outline"></ion-icon>
      <p>Hỏi & Đáp</p>
    </div>
    <!-- Post -->
    <div class=" w-full overflow-y-scroll  h-[30rem] border py-5 rounded-lg px-5 shadow bg-slate-50/50 ">
      <!-- nobody comment -> show it -->
      <span class="loading loading-dots loading-lg"></span>
      <!-- nobody comment -> show it -->
      <section class="w-full  " th:each="feedback : ${feedbacks}">
        <div class="chat chat-start w-full">
          <div class="chat-image avatar">
            <div class="w-10 rounded-full">
              <img alt="Tailwind CSS chat bubble component" th:src="'/assets/images/' + ${feedback.customer.photo}" />
            </div>
          </div>
          <div class="chat-header">
            <p th:text="${feedback.customer.fullName}"></p>
            <time class="text-xs opacity-50" th:text="${feedback.feedback_date}"></time>
          </div>
          <div class="chat-bubble chat-bubble-warning">
            <p th:text="${feedback.content}"></p>
          </div>
        </div>
        <!-- Reply -->
        <div class="border bg-white w-[95%] overflow-y-scroll h-[15rem] mt-5 pb-5 rounded-lg float-right ">
          <div th:each="reply : ${feedback.replies}" class="chat chat-start mx-5 mt-5 w-full">
            <div class="chat-image avatar">
              <div class="w-10 rounded-full">
                <img alt="1" th:src="'/assets/images/' + ${reply.customer.photo}" />
              </div>
            </div>
            <div class="chat-header">
              <p th:text="${reply.customer.fullName}"></p>

            </div>
            <div th:text="${reply.replyText}" class="chat-bubble chat-bubble-warning"></div>

          </div>
          <!--  -->

          <div class="mx-5 pt-5 w-full sticky bottom-0">
            <form th:action="@{'/feedbacks/reply/' + ${products.productId}}" class="flex w-full gap-x-3" method="post">
              <input type="hidden" th:name="feedbackId" th:value="${feedback.feedbackId}" />

              <input type="text" id="replyText" name="replyText"
                class="w-[80%] py-3 rounded-lg bg-white px-2 outline-none border border-orange-300"
                placeholder="Enter your comment ....." />
              <input type="hidden" id="userId" th:name="userId" th:value="${userId}" />
              <!-- Chú ý: Đây là ví dụ cứng coded để biểu thị user_id, bạn cần điều chỉnh để lấy user_id của người đăng nhập thực tế -->

              <button type="submit"
                class="py-3 border border-orange-300 hover:bg-orange-300 hover:duration-300 duration-300 rounded-lg w-[10%]">Phản hồi</button>
            </form>
          </div>
        </div>
        <!-- Reply -->
      </section>
    </div>
    <!-- Post -->
  </section>
  <!-- Comment -->


  <!-- Related Products -->
  <section class="w-[90%] md:w-[80%] h-full mx-auto text-black font-light text-xs my-10  ">
    <div class="text-3xl font-semibold text-center">
      <p>Sản Phẩm Liên Quan</p>
    </div>
    <div class=" my-5 w-full flex ">
          
      <section   th:each="product4 : ${top4Product} "  class="w-full group duration-300 hover:border hover:border-orange-300 hover:duration-300 rounded-lg flex   flex-col items-center">
        <a th:href="@{'/ProductDetails/' + ${product4.productId}}">   <div class="w-full py-2">
          <img class="w-full h-[218px] mx-auto px-5 rounde" th:src="'/assets/images/products/' + ${product4.image}" alt="product4">
          
          <div class=" flex flex-col text-center items-center my-2 mx-2 text-black font-light gap-y-3">
            <div class="">
                <p th:text="${product4.name}"></p>
            </div>
            <div class="rating rating-xs">
                <input type="radio" name="rating-2" class="mask mask-star-2 bg-orange-400" />
                <input type="radio" name="rating-2" class="mask mask-star-2 bg-orange-400" checked />
                <input type="radio" name="rating-2" class="mask mask-star-2 bg-orange-400" />
                <input type="radio" name="rating-2" class="mask mask-star-2 bg-orange-400" />
                <input type="radio" name="rating-2" class="mask mask-star-2 bg-orange-400" />
            </div>
            <div class="text-orange-300 font-semibold">
                <p th:text="${#numbers.formatDecimal(product4.price, 0, 'COMMA', 0, 'POINT')} + ' VND'"></p>
            </div>
            <!-- <p th:text="'Đã bán: ' + ${unitsSoldMap[__${product4.productId}__]}"></p> -->
            <p th:text="'Hàng còn: ' + ${product4.quantityInStock}"></p>
            <div class="flex  duration-300   group-hover:duration-300">
                <form th:action="@{/cart/addItem}" method="post">
                    <input hidden="" th:value="${product4.productId}" name="productId">
                  
                    <button class="border py-1 px-3 bg-orange-300 rounded invisible duration-300 group-hover:visible group-hover:duration-300"><ion-icon class="text-sm" name="cart-outline"></ion-icon></button>
                </form>
                
                <a th:href="@{'/pay/'+${product4.productId}}" class="border py-1 px-3 bg-orange-300 rounded invisible duration-300 group-hover:visible group-hover:duration-300"><ion-icon name="wallet-outline"></ion-icon></a>
            </div>
          </div>
        </a>
      </section>
                  
    </div>


 
  </section>
  <!-- Related Products -->

</body>

</html>