<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" th:replace="~{/components/layout :: areas(~{::title},~{::body})}">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marious | Sản Phẩm</title>

    <!-- Library -->
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.4.2/dist/full.min.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- icon -->
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <!-- icon -->
    <!-- Library -->
</head>

<body class="bg-white min-h-screen">


    <section class="w-[80%] mx-auto my-5">
        <!-- <div class="carousel w-full rounded-box">
            <div id="slide1" class="carousel-item relative w-full rounded-lg">
                <img src="https://img.upanh.tv/2023/11/21/Banner2.png" alt="Banner2.png" class="w-full rounded-lg">
                <div class="absolute flex justify-between transform -translate-y-1/2 left-5 right-5 top-1/2">
                    <a href="#slide4" class="btn btn-circle">❮</a>
                    <a href="#slide2" class="btn btn-circle">❯</a>
                </div>
            </div>
            <div id="slide2" class="carousel-item relative w-full">
                <img src="https://img.upanh.tv/2023/11/21/Banner2.png" alt="Banner2.png" class="w-full rounded-lg">
                <div class="absolute flex justify-between transform -translate-y-1/2 left-5 right-5 top-1/2">
                    <a href="#slide1" class="btn  btn-outline">❮</a>
                    <a href="#slide3" class="btn btn-circle">❯</a>
                </div>
            </div>
            <div id="slide3" class="carousel-item relative w-full">
                <img src="https://img.upanh.tv/2023/11/21/Banner2.png" alt="Banner2.png" class="w-full rounded-lg">
                <div class="absolute flex justify-between transform -translate-y-1/2 left-5 right-5 top-1/2">
                    <a href="#slide2" class="btn btn-circle">❮</a>
                    <a href="#slide4" class="btn btn-circle">❯</a>
                </div>
            </div>
            <div id="slide4" class="carousel-item relative w-full">
                <img src="https://img.upanh.tv/2023/11/21/Banner2.png" alt="Banner2.png" class="w-full rounded-lg">
                <div class="absolute flex justify-between transform -translate-y-1/2 left-5 right-5 top-1/2">
                    <a href="#slide3" class="btn btn-circle">❮</a>
                    <a href="#slide1" class="btn btn-circle">❯</a>
                </div>
            </div>
        </div> -->

        <div class="" th:replace="./components/custom/_carousel.html"></div>
    </section>


    <section class="w-[80%] mx-auto mt-5">
        <div class="w-full flex justify-end">
            <div class="flex w-full gap-x-2">
                <button class="border rounded-lg px-5 py-1 border-orange-300 text-orange-300 text-2xl">
                    <ion-icon name="filter-outline"></ion-icon>
                </button>
                <div class="border grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-x-5 px-5 py-2 gap-y-2 items-center rounded-lg border-orange-300 w-full text-black text-sm font-light">
                    <div class="form-control">
                        <label class="cursor-pointer flex items-center gap-x-2">
                            <input type="checkbox" class="checkbox checkbox-warning" id="sortByLowToHigh" />
                            <span>Giá thấp -> cao</span>
                        </label>
                    </div>
                    <div class="form-control">
                        <label class="cursor-pointer flex items-center gap-x-2">
                            <input type="checkbox" class="checkbox checkbox-warning" id="sortByHighToLow" />
                            <span>Giá cao -> thấp</span>
                        </label>
                    </div>
                    <!-- Các checkbox khác -->
                </div>
            </div>
        </div>
        <div id="productList" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 items-center gap-x-2 my-10">

            <section th:replace="./components/custom/_card.html" >
           
            
        </section>
        
        
        



        </div>
        <div th:if="${products.totalPages > 1}" class="w-full flex justify-center">
            <div th:if="${check == 'check2'}" class="join">
                <a th:href="@{'/listproduct/?page=' + ${i}}"
                    th:each="i : ${#numbers.sequence(0, products.totalPages - 1)}"
                    th:class="${products.number == i} ? 'page-item active  btn join-item' : 'page-item  btn join-item'">
                    <button class="page-link" th:text="${i} + 1"></button>
                </a>

            </div>
            <div th:if="${check == 'check'}" class="join">
                <a th:href="@{'/product/category/' + ${categoryID} + '?page=' + ${i}}"
                    th:each="i : ${#numbers.sequence(0, products.totalPages - 1)}"
                    th:class="${products.number == i} ? 'page-item active  btn join-item' : 'page-item  btn join-item'">
                    <button class="page-link" th:text="${i} + 1"></button>
                </a>

            </div>
        </div>





    </section>




<!-- <script th:inline="javascript">

const sortByLowToHighCheckbox = document.getElementById('sortByLowToHigh');
const sortByHighToLowCheckbox = document.getElementById('sortByHighToLow');

sortByLowToHighCheckbox.addEventListener('change', function () {
    if (this.checked) {
        // Nếu checkbox được chọn, thực hiện sắp xếp từ thấp đến cao
        sortProductsByLowToHigh();
    } else {
        // Nếu checkbox không được chọn, thực hiện hành động khác (nếu cần)
    }
});

sortByHighToLowCheckbox.addEventListener('change', function () {
    if (this.checked) {
        // Nếu checkbox được chọn, thực hiện sắp xếp từ cao đến thấp
        sortProductsByHighToLow();
    } else {
        // Nếu checkbox không được chọn, thực hiện hành động khác (nếu cần)
    }
});

function sortProductsByLowToHigh() {
    fetch('/api/products/sort/low-to-high')
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            return response.json();
        })
        .then(sortedProducts => {
            // Cập nhật giao diện với dữ liệu đã sắp xếp
            console.log('Dữ liệu đã sắp xếp từ thấp đến cao:', sortedProducts);
            // Gọi hàm cập nhật giao diện với dữ liệu đã nhận được tại đây
             updateUI(sortedProducts);
        })
        .catch(error => {
            console.error('There has been a problem with your fetch operation:', error);
            // Xử lý lỗi nếu có
        });
    console.log('Đã chọn sắp xếp giá thấp -> cao');
}

function sortProductsByHighToLow() {
    // Thực hiện logic sắp xếp sản phẩm từ giá cao đến thấp
    // Gọi các hàm hoặc thực hiện logic sắp xếp tại đây
    // Ví dụ:
    // 1. Gửi yêu cầu đến backend để lấy dữ liệu đã sắp xếp từ cao đến thấp
    // 2. Cập nhật giao diện với dữ liệu đã sắp xếp
    console.log('Đã chọn sắp xếp giá cao -> thấp');
}

function fetchProducts() {
    fetch('/api/product') // Thay đổi URL này thành địa chỉ URL thực tế của API lấy sản phẩm
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            return response.json();
        })
        .then(products => {
            updateUI(products);
        })
        .catch(error => {
            console.error('There has been a problem with your fetch operation:', error);
            // Xử lý lỗi nếu có
        });
}   

function updateUI(products) {
    const productList = document.getElementById('productList'); // Thay 'productList' bằng id thực tế của phần tử chứa danh sách sản phẩm

    // Xóa các sản phẩm cũ trước khi cập nhật danh sách mới
    productList.innerHTML = '';

    // Duyệt qua danh sách sản phẩm và thêm vào giao diện
    products.forEach(product => {
        const productElement = document.createElement('section');
        // Tạo các thành phần HTML cho mỗi sản phẩm và thêm vào productElement
        // Ví dụ:
        productElement.innerHTML = `
        <a href="/ProductDetails/${product.productId}"> 
    <div class="w-full py-2">
        <img class="w-[90%] h-[225px] mx-auto shadow rounded"
        src="/assets/images/products/${product.image}"
            alt="">
    </div>
    <div class=" flex flex-col text-center items-center my-2 mx-2 text-black font-light gap-y-3">
        <div class="">
            <p>${product.name}</p>
            <p>${product.price}</p>
        </div>
        <div class="rating rating-xs">
            <input type="radio" name="rating-2" class="mask mask-star-2 bg-orange-400" />
            <input type="radio" name="rating-2" class="mask mask-star-2 bg-orange-400" checked />
            <input type="radio" name="rating-2" class="mask mask-star-2 bg-orange-400" />
            <input type="radio" name="rating-2" class="mask mask-star-2 bg-orange-400" />
            <input type="radio" name="rating-2" class="mask mask-star-2 bg-orange-400" />
        </div>
        
      
        <p>Hàng còn: ${product.quantityInStock} </p>
        <div class="flex  duration-300   group-hover:duration-300">
            <form action="/cart/addItem" method="post">
                <input hidden="" value="${product.productId}" name="productId">
              
                <button class="border py-1 px-3 bg-orange-300 rounded invisible duration-300 group-hover:visible group-hover:duration-300"><ion-icon class="text-sm" name="cart-outline"></ion-icon></button>
            </form>
            <a href="/"
                class="border py-1 px-3 bg-orange-300 rounded invisible duration-300 group-hover:visible group-hover:duration-300"><ion-icon
                    name="wallet-outline"></ion-icon></a>
        </div>
    </div>
    </a>
       
      
        `;

        // Thêm productElement vào productList
        productList.appendChild(productElement);
    });
}

// Gọi hàm fetchProducts khi trang được tải
fetchProducts();


</script> -->

</body>

</html>